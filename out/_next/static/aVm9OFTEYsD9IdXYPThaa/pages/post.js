(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"+vdH":function(e,a,n){"use strict";n.r(a),n.d(a,"title",function(){return g}),n.d(a,"createdAt",function(){return d}),n.d(a,"filename",function(){return u}),n.d(a,"category",function(){return h}),n.d(a,"tag",function(){return N}),n.d(a,"thumb",function(){return E}),n.d(a,"slug",function(){return T}),n.d(a,"default",function(){return D});var t=n("qNsG"),s=n("0iUn"),o=n("sLSF"),m=n("MI3g"),r=n("a7VT"),p=n("Tit0"),c=n("q1tI"),l=n.n(c),i=n("6qfE"),g="How to set state with data from apollo grapqhQL query",d="2018-09-08T00:00:00.000Z",u="2018-09-08-How-to-set-state-with-data-from-graphQL-query",h=["react"],N=["react","apollo","graphQL"],E="2018-09-08_thumb.png",T="Prefill the data before component rendered",D=function(e){function a(e){var n;return Object(s.default)(this,a),(n=Object(m.default)(this,Object(r.default)(a).call(this,e))).layout=null,n}return Object(p.default)(a,e),Object(o.default)(a,[{key:"render",value:function(){var e=this.props,a=e.components;Object(t.a)(e,["components"]);return l.a.createElement(i.MDXTag,{name:"wrapper",components:a},l.a.createElement(i.MDXTag,{name:"h1",components:a},"How to set state with data from apollo grapqhQL query"),l.a.createElement(i.MDXTag,{name:"p",components:a},"by moondaddi on 2018-09-08"),l.a.createElement(i.MDXTag,{name:"hr",components:a}),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Prefill the form with query data"),l.a.createElement(i.MDXTag,{name:"ul",components:a},l.a.createElement(i.MDXTag,{name:"li",components:a,parentName:"ul"},"prefill values into form or render data into DOM after query"),l.a.createElement(i.MDXTag,{name:"li",components:a,parentName:"ul"},"modify data after query")),l.a.createElement("br",null),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Solution 1"),l.a.createElement(i.MDXTag,{name:"h3",components:a},"in componentDidMount()"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-javascript"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"import")," React ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"from")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"react"'),";\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"import")," { Query } ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"from")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"react-apollo"'),";\n\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-class"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-keyword"}},"class")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-title"}},"Example")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-keyword"}},"extends")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-title"}},"React"),".",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-title"}},"Component")," "),"{\n  state = {\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"some"),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-literal"}},"null"),"\n  };\n\n  componentDidMount() {\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"this"),"._queryMe\n      .query({\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"query"),": other - query,\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"variables"),": { ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"some"),": thing }\n      })\n      .then(",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-function"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-params"}},"response")," =>")," {\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"this"),".setState({\n          ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"some"),": data.me.nickname\n        });\n      })\n      .catch(",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-function"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-params"}},"error")," =>")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-built_in"}},"console"),".log(error));\n  }\n\n  render() {\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"return")," (\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"xml"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-tag"}},"<",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-name"}},"Query")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-attr"}},"query"),"=",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-string"}},"{some")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-attr"}},"-")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-attr"}},"query"),"}>"),"\n        {({ client }) => {\n          this._queryMe = client;\n\n          return null;\n        }}\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-tag"}},"</",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-name"}},"Query"),">")),"\n    );\n  }\n}")),l.a.createElement(i.MDXTag,{name:"h3",components:a},"props function : onCompleted"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-javascript"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"import")," React ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"from")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'react'"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"import")," { Query } ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"from")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'react-apollo'"),"\n\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-class"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-keyword"}},"class")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-title"}},"Example")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-keyword"}},"extends")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-title"}},"React"),".",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-title"}},"Component")," "),"{\n  state = {\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"some"),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-literal"}},"null"),"\n  }\n\n  _queryMe = ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-function"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-params"}},"data")," =>")," {\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"this"),".setState({\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"some"),": data\n    })\n  }\n\n  render() {\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"return")," (\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"xml"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-tag"}},"<",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-name"}},"Query"),"\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-attr"}},"query"),"=",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-string"}},"{some-query}"),"\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-attr"}},"onCompleted"),"=",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-string"}},"{data")," =>")," this.\\_queryMe(data)}\n      >\n        {() => {\n          return null;\n        }}\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-tag"}},"</",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-name"}},"Query"),">")),"\n    )\n  }\n}")),l.a.createElement("br",null),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Solution 2 (The BEST ðŸ‘)"),l.a.createElement(i.MDXTag,{name:"p",components:a},"Using HOC withApollo"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-javascript"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-class"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-keyword"}},"class")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-title"}},"Example")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-keyword"}},"extends")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-title"}},"React"),".",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-title"}},"Component")," "),"{\n  state = {\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"some"),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-literal"}},"null"),"\n  };\n\n  componentDidMount() {\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"this"),".props.client\n      .query({\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"query"),": some_query,\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"variables"),": {\n          ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"id"),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-number"}},"1"),"\n        }\n      })\n      .then(",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-function"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-params"}},"res")," =>"),"\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"this"),".setState({\n          ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"some"),": res\n        })\n      );\n  }\n\n  render() {\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"return")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"xml"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-tag"}},"<",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-name"}},"div"),">"),"...",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-tag"}},"</",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-name"}},"div"),">")),";\n  }\n}\n\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-comment"}},"// using HOC"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"export")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"default")," withApollo(Example);")))}}]),a}(l.a.Component);D.isMDXComponent=!0},"4mXO":function(e,a,n){e.exports=n("7TPF")},"6cft":function(e,a,n){"use strict";n.r(a),n.d(a,"title",function(){return g}),n.d(a,"createdAt",function(){return d}),n.d(a,"filename",function(){return u}),n.d(a,"category",function(){return h}),n.d(a,"tag",function(){return N}),n.d(a,"thumb",function(){return E}),n.d(a,"slug",function(){return T}),n.d(a,"default",function(){return D});var t=n("qNsG"),s=n("0iUn"),o=n("sLSF"),m=n("MI3g"),r=n("a7VT"),p=n("Tit0"),c=n("q1tI"),l=n.n(c),i=n("6qfE"),g="How to highlight code in jekyll post",d="2018-09-01T00:00:00.000Z",u="2018-09-01-How-to-highlight-code-in-jekyll",h=["devlogs"],N=["jekyll","blog"],E="2018-09-01_thumb.jpeg",T="The jekyll for Github page, but no more use...",D=function(e){function a(e){var n;return Object(s.default)(this,a),(n=Object(m.default)(this,Object(r.default)(a).call(this,e))).layout=null,n}return Object(p.default)(a,e),Object(o.default)(a,[{key:"render",value:function(){var e=this.props,a=e.components;Object(t.a)(e,["components"]);return l.a.createElement(i.MDXTag,{name:"wrapper",components:a},l.a.createElement(i.MDXTag,{name:"h1",components:a},"How to highlight code in jekyll post"),l.a.createElement(i.MDXTag,{name:"p",components:a},"by moondaddi on 2018-09-01"),l.a.createElement(i.MDXTag,{name:"hr",components:a}),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Check ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"h2"},"_config.yml")),l.a.createElement(i.MDXTag,{name:"p",components:a},"highlighter: rouge"),l.a.createElement("br",null),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Usage - ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"h2"},"Liquid templating")),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-rb"}},"{% highlight some-language %}\n...\n{% endhighlight %}")))}}]),a}(l.a.Component);D.isMDXComponent=!0},"6qfE":function(e,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=n("RSLW");Object.defineProperty(a,"MDXTag",{enumerable:!0,get:function(){return o(t).default}});var s=n("Fobl");function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"MDXProvider",{enumerable:!0,get:function(){return o(s).default}})},"7Fyx":function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/post",function(){var e=n("uxIH");return{page:e.default||e}}])},"7TPF":function(e,a,n){n("AUvm"),e.exports=n("WEpk").Object.getOwnPropertySymbols},"9X6Z":function(e,a,n){"use strict";n.r(a);var t=n("q1tI"),s=n.n(t),o=n("4oX2"),m=n("MX0m"),r=n.n(m),p=function(){return s.a.createElement("div",{id:"header",className:"jsx-3700472044"},s.a.createElement("div",{className:"jsx-3700472044 container"},s.a.createElement("div",{className:"jsx-3700472044 header-container"},s.a.createElement("div",{id:"header-title",className:"jsx-3700472044"},s.a.createElement("a",{href:"/",className:"jsx-3700472044"},"Build the Codes")),s.a.createElement("div",{id:"header-body",className:"jsx-3700472044"},s.a.createElement("div",{id:"menu",className:"jsx-3700472044"},s.a.createElement("div",{id:"header-blog",className:"jsx-3700472044"},s.a.createElement("a",{href:"/blog",className:"jsx-3700472044"},"Blog")),s.a.createElement("div",{id:"header-tag",className:"jsx-3700472044"},s.a.createElement("a",{href:"/tag",className:"jsx-3700472044"},"Tags")))))),s.a.createElement(r.a,{id:"3700472044"},[".header-container.jsx-3700472044{position:relative;margin:0 1rem;}","#header-title.jsx-3700472044{display:inline-block;font-family:var(--text-san-serif);font-size:1.4rem;margin:1rem auto;font-weight:bold;}","#header-title.jsx-3700472044 a.jsx-3700472044{-webkit-text-decoration:none;text-decoration:none;}","#header-body.jsx-3700472044{display:inline-block;position:absolute;right:0;margin:1rem auto;text-align:right;}","#menu.jsx-3700472044{display:inline-block;font-size:0.9rem;}","#menu.jsx-3700472044 #header-blog.jsx-3700472044{display:inline-block;margin:auto 1rem;}","#menu.jsx-3700472044 #header-tag.jsx-3700472044{display:inline-block;margin:auto 1rem;}","@media (max-width:576px){#header-title.jsx-3700472044{margin:1rem auto 0 auto;}#header-body.jsx-3700472044{display:block;text-align:right;position:relative;margin:0 auto;}}"]))},c=n("Dc70");a.default=function(e){var a=n("SeoB")("./".concat(e.post.filename,".md"));return s.a.createElement(s.a.Fragment,null,s.a.createElement(p,null),s.a.createElement("div",{id:"content"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"post-content"},s.a.createElement(a.default,null)))),s.a.createElement(c.a,null),s.a.createElement(o.a,null))}},"AT/M":function(e,a,n){"use strict";function t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.r(a),n.d(a,"default",function(){return t})},CSM1:function(e,a,n){"use strict";n.r(a),n.d(a,"title",function(){return g}),n.d(a,"createdAt",function(){return d}),n.d(a,"filename",function(){return u}),n.d(a,"category",function(){return h}),n.d(a,"tag",function(){return N}),n.d(a,"thumb",function(){return E}),n.d(a,"slug",function(){return T}),n.d(a,"default",function(){return D});var t=n("qNsG"),s=n("0iUn"),o=n("sLSF"),m=n("MI3g"),r=n("a7VT"),p=n("Tit0"),c=n("q1tI"),l=n.n(c),i=n("6qfE"),g="First post",d="2018-08-24T00:00:00.000Z",u="2018-08-24-First-Post",h=["devlogs"],N=["first","post"],E="2018-08-24_thumb.jpg",T="A late start, but a Big step forward",D=function(e){function a(e){var n;return Object(s.default)(this,a),(n=Object(m.default)(this,Object(r.default)(a).call(this,e))).layout=null,n}return Object(p.default)(a,e),Object(o.default)(a,[{key:"render",value:function(){var e=this.props,a=e.components;Object(t.a)(e,["components"]);return l.a.createElement(i.MDXTag,{name:"wrapper",components:a},l.a.createElement(i.MDXTag,{name:"h1",components:a},"First Post"),l.a.createElement(i.MDXTag,{name:"p",components:a},"by moondaddi on 2018-08-24"),l.a.createElement(i.MDXTag,{name:"hr",components:a}),l.a.createElement(i.MDXTag,{name:"h3",components:a},"Late start, but a big step forward"),l.a.createElement(i.MDXTag,{name:"p",components:a},"This is my first post of my Blog for storing codes while learnig and working on."))}}]),a}(l.a.Component);D.isMDXComponent=!0},Dc70:function(e,a,n){"use strict";var t=n("MX0m"),s=n.n(t),o=n("q1tI"),m=n.n(o);a.a=function(){return m.a.createElement("div",{id:"header",className:"jsx-3072866633"},m.a.createElement("div",{className:"jsx-3072866633 container"},m.a.createElement("div",{className:"jsx-3072866633 header-container"},m.a.createElement("div",{id:"header-title",className:"jsx-3072866633"},m.a.createElement("a",{href:"/",className:"jsx-3072866633"},"Build the Codes")),m.a.createElement("div",{id:"header-body",className:"jsx-3072866633"},m.a.createElement("div",{id:"avatar-img",style:{backgroundImage:'url("/static/images/avatar/moondaddi_avatar.jpg")'},className:"jsx-3072866633"}),m.a.createElement("div",{id:"profile",className:"jsx-3072866633"},m.a.createElement("div",{id:"name",className:"jsx-3072866633"},m.a.createElement("a",{href:"/",className:"jsx-3072866633"},"moondaddi")),m.a.createElement("div",{className:"jsx-3072866633"},"My dreams with Codes")),m.a.createElement("div",{id:"menu",className:"jsx-3072866633"})))),m.a.createElement(s.a,{id:"3072866633"},["#header.jsx-3072866633{background-color:var(--background-color);color:white;}",".header-container.jsx-3072866633{margin:0 1rem;padding:1rem 0;}","#header-title.jsx-3072866633{display:block;position:relative;font-family:var(--text-san-serif);font-size:1.7rem;margin:1rem auto;font-weight:bold;}","#header-title.jsx-3072866633 a.jsx-3072866633{color:white;-webkit-text-decoration:none;text-decoration:none;}","#avatar-img.jsx-3072866633{display:inline-block;-webkit-border-radius:25px;-moz-border-radius:25px;border-radius:25px;width:50px;height:50px;background-size:contain;background-repeat:no-repeat;background-position:center center;vertical-align:middle;}","#profile.jsx-3072866633{display:inline-block;vertical-align:middle;padding-left:1rem;font-family:$font-serif;color:$text-normal-color;font-size:0.9rem;}","#header-body.jsx-3072866633{position:relative;}","#menu.jsx-3072866633{display:inline-block;position:absolute;right:0;font-family:$font-serif;font-size:0.9rem;margin-top:1rem;}","#menu.jsx-3072866633 #header-tag.jsx-3072866633{display:inline-block;margin:auto 1rem;}","@media (max-width:576px){#menu.jsx-3072866633{display:block;text-align:right;position:relative;}}"]))}},Fobl:function(e,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.withMDXComponents=void 0;var t,s=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},o=n("q1tI"),m=(t=o)&&t.__esModule?t:{default:t};var r=m.default.createContext({}),p=r.Provider,c=r.Consumer;a.withMDXComponents=function(e){return function(a){return m.default.createElement(c,null,function(n){return m.default.createElement(e,s({},a,{components:a.components||n}))})}};a.default=function(e){return m.default.createElement(p,{value:e.components},e.children)}},IRSK:function(e,a,n){"use strict";e.exports=[{title:"Commands for Postgres DB initial Setup",createdAt:"2019-02-25",filename:"2019-02-25-Commands-for-Postgres-DB-setup",category:["backend"],tag:["postgres","db"],thumb:"2019-02-25_thumb.jpg",slug:"Create DB, TABLE, USER, permission"},{title:"Kill the process using port",createdAt:"2019-03-05",filename:"2019-03-05-Kill-Process-Using-Port",category:["devlogs"],tag:["macos","kill","port"],thumb:"2019-03-05_thumb.jpg",slug:"Kill the process occupying the TCP port in abnormal and unintended way."},{title:"File upload with GraphQL Apollo client & Django + Graphene",createdAt:"2018-08-28",filename:"2018-08-28-File-upload-with-GraphQL-Apollo-Client-Django-Graphene",category:["django"],tag:["django","graphql","graphene","apollo"],thumb:"2018-08-28_thumb.png",slug:"The Graphene is the pain."},{title:"Nested Comment Reply stucture with ReactJS",createdAt:"2018-08-31",filename:"2018-08-31-Nested-Comment-Reply-sturcture-with-ReactJS",category:["react"],tag:["react","comment"],thumb:"2018-08-31_thumb.jpg",slug:"Comment structure implementation"},{title:"Markdown summary",createdAt:"2018-08-24",filename:"2018-08-24-Markdown-summary",category:["devlogs"],tag:["markdown","summary"],thumb:"2018-08-24_thumb.png",slug:"Hard to remember"},{title:"First post",createdAt:"2018-08-24",filename:"2018-08-24-First-Post",category:["devlogs"],tag:["first","post"],thumb:"2018-08-24_thumb.jpg",slug:"A late start, but a Big step forward"},{title:"How to set state with data from apollo grapqhQL query",createdAt:"2018-09-08",filename:"2018-09-08-How-to-set-state-with-data-from-graphQL-query",category:["react"],tag:["react","apollo","graphQL"],thumb:"2018-09-08_thumb.png",slug:"Prefill the data before component rendered"},{title:"How to Deploy the Next.js app to AWS Lambda",createdAt:"2019-01-11",filename:"2019-01-11-Deploy-Nextjs-app-to-AWS-Lambda",category:["react"],tag:["next","aws","lambda"],thumb:"2019-01-11_thumb.png",slug:"with Apex up"},{title:"How to replace the React Redux with Hooks",createdAt:"2019-02-11",filename:"2019-02-11-How-to-Replace-Redux-with-Hooks",category:["react"],tag:["hooks","redux"],thumb:"2019-02-11_thumb.png",slug:"React release the game-changer departing from Class programming way."},{title:"AWS Elastic Beanstalk makes redirect HTTP to HTTPS",createdAt:"2018-12-18",filename:"2018-12-18-AWS-EB-Load-Balancer-redirect-to-https",category:["backend"],tag:["aws","eb","elastic","beanstalk","redirect","https"],thumb:"2018-12-18_thumb.jpg",slug:"Sweet beanstalk"},{title:"Deploy the Prisma Server to AWS ECS and EC2 with Docker",createdAt:"2018-12-24",filename:"2018-12-24-Deploy-Prisma-Server-to-AWS-with-Docker",category:["backend"],tag:["aws","graphql","prisma","ecs"],thumb:"2018-12-24_thumb.png",slug:"Fix the bugs!"},{title:"Making virtualenv for staring Django project on MacOS",createdAt:"2018-08-25",filename:"2018-08-25-Making-virtualenv-for-Django",category:["django"],tag:["django","venv","virtualenv"],thumb:"2018-08-25_thumb.jpg",slug:"Hard to remember #2"},{title:"Some different ways to align element to vertical center",createdAt:"2018-08-30",filename:"2018-08-30-How-to-align-element-to-vertical-center",category:["htmlcss"],tag:["vertical","align"],thumb:"2018-08-30_thumb.jpeg",slug:"A Markup is one of tough task in web dev."},{title:"How to highlight code in jekyll post",createdAt:"2018-09-01",filename:"2018-09-01-How-to-highlight-code-in-jekyll",category:["devlogs"],tag:["jekyll","blog"],thumb:"2018-09-01_thumb.jpeg",slug:"The jekyll for Github page, but no more use..."},{title:"How to connect to wireless WPA2 with Netplan",createdAt:"2018-12-10",filename:"2018-12-10-Netplan-how-to-connect-wpa2-linux",category:["devlogs"],tag:["netplan","linux","wireless"],thumb:"2018-12-10_thumb.png",slug:"Hard to remember #3"},{title:"postmaster-pid File Location",createdAt:"2018-09-27",filename:"2018-09-27-postmaster-pid-Location",category:["django"],tag:["postgres","postmaster","db"],thumb:"2018-09-27_thumb.png",slug:"What the hell is `postmaster.pid`?"}]},KRji:function(e,a,n){"use strict";n.r(a),n.d(a,"title",function(){return g}),n.d(a,"createdAt",function(){return d}),n.d(a,"filename",function(){return u}),n.d(a,"category",function(){return h}),n.d(a,"tag",function(){return N}),n.d(a,"thumb",function(){return E}),n.d(a,"slug",function(){return T}),n.d(a,"default",function(){return D});var t=n("qNsG"),s=n("0iUn"),o=n("sLSF"),m=n("MI3g"),r=n("a7VT"),p=n("Tit0"),c=n("q1tI"),l=n.n(c),i=n("6qfE"),g="Some different ways to align element to vertical center",d="2018-08-30T00:00:00.000Z",u="2018-08-30-How-to-align-element-to-vertical-center",h=["htmlcss"],N=["vertical","align"],E="2018-08-30_thumb.jpeg",T="A Markup is one of tough task in web dev.",D=function(e){function a(e){var n;return Object(s.default)(this,a),(n=Object(m.default)(this,Object(r.default)(a).call(this,e))).layout=null,n}return Object(p.default)(a,e),Object(o.default)(a,[{key:"render",value:function(){var e=this.props,a=e.components;Object(t.a)(e,["components"]);return l.a.createElement(i.MDXTag,{name:"wrapper",components:a},l.a.createElement(i.MDXTag,{name:"h1",components:a},"Some different ways to align element to vertical center"),l.a.createElement(i.MDXTag,{name:"p",components:a},"by moondaddi on 2018-08-30"),l.a.createElement(i.MDXTag,{name:"hr",components:a}),l.a.createElement(i.MDXTag,{name:"h3",components:a},"Alignment to vertical center against wrapping parent element using CSS transform"),l.a.createElement("br",null),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Why is it special?"),l.a.createElement(i.MDXTag,{name:"p",components:a},"Generally, there are some tools and how-to to align element against parent element. But, in this case parent element has flexible width and height with fixed aspect ratio(1:1)."),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-html"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-tag"}},"<",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-name"}},"div")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-attr"}},"class"),"=",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-string"}},'"card"'),">"),"\n  ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-tag"}},"<",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-name"}},"div")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-attr"}},"style"),"=",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-string"}},'"max-width:100%; padding-top:100%;"'),">"),"\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-tag"}},"<",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-name"}},"img"),"\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-attr"}},"src"),"=",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-string"}},'"/some/thing.jpg"'),"\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-attr"}},"alt"),"=",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-string"}},'"something"'),"\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-attr"}},"style"),"=",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-string"}},'"\n        position:absolute\n        top:50%;\n        left:0;\n        max-width:100%;\n        transform:translateY(-50%);"'),"\n    />"),"\n  ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-tag"}},"</",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-name"}},"div"),">"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-tag"}},"</",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-name"}},"div"),">"))),l.a.createElement("br",null),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Lesson & Learn"),l.a.createElement(i.MDXTag,{name:"p",components:a},"Use Flexbox! ðŸ‘"))}}]),a}(l.a.Component);D.isMDXComponent=!0},MI3g:function(e,a,n){"use strict";n.r(a),n.d(a,"default",function(){return o});var t=n("dhhW"),s=n("AT/M");function o(e,a){return!a||"object"!==Object(t.default)(a)&&"function"!=typeof a?Object(s.default)(e):a}},Moqv:function(e,a,n){"use strict";n.r(a),n.d(a,"title",function(){return g}),n.d(a,"createdAt",function(){return d}),n.d(a,"filename",function(){return u}),n.d(a,"category",function(){return h}),n.d(a,"tag",function(){return N}),n.d(a,"thumb",function(){return E}),n.d(a,"slug",function(){return T}),n.d(a,"default",function(){return D});var t=n("qNsG"),s=n("0iUn"),o=n("sLSF"),m=n("MI3g"),r=n("a7VT"),p=n("Tit0"),c=n("q1tI"),l=n.n(c),i=n("6qfE"),g="postmaster-pid File Location",d="2018-09-27T00:00:00.000Z",u="2018-09-27-postmaster-pid-Location",h=["django"],N=["postgres","postmaster","db"],E="2018-09-27_thumb.png",T="What the hell is `postmaster.pid`?",D=function(e){function a(e){var n;return Object(s.default)(this,a),(n=Object(m.default)(this,Object(r.default)(a).call(this,e))).layout=null,n}return Object(p.default)(a,e),Object(o.default)(a,[{key:"render",value:function(){var e=this.props,a=e.components;Object(t.a)(e,["components"]);return l.a.createElement(i.MDXTag,{name:"wrapper",components:a},l.a.createElement(i.MDXTag,{name:"h1",components:a},"'postmaster.pid' File Location"),l.a.createElement(i.MDXTag,{name:"p",components:a},"by Moondaddi on 2018-09-27"),l.a.createElement(i.MDXTag,{name:"hr",components:a}),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Where is the 'postmaster.pid'?"),l.a.createElement(i.MDXTag,{name:"p",components:a},"Time to time, I encounter the error when I try to start PostgreSQL DB again. Especially, right after cold power-off, it comes a lot to me. If you use GUI interface of PostgreSQL, it gives you a long instruction failed to start properly. But, simply, you can start again after delete this 'postmaster.pid' file in your macOS system."),l.a.createElement("br",null),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Location of 'postmaster.pid'"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},"/Users/user_name/Library/Application Support/Postgres/var-10")),l.a.createElement(i.MDXTag,{name:"blockquote",components:a},l.a.createElement(i.MDXTag,{name:"p",components:a,parentName:"blockquote"},"Note: PostgreSQL ver. 10, it can be changed depends on what version of postgres you use.")))}}]),a}(l.a.Component);D.isMDXComponent=!0},PRoP:function(e,a,n){"use strict";n.r(a),n.d(a,"title",function(){return g}),n.d(a,"createdAt",function(){return d}),n.d(a,"filename",function(){return u}),n.d(a,"category",function(){return h}),n.d(a,"tag",function(){return N}),n.d(a,"thumb",function(){return E}),n.d(a,"slug",function(){return T}),n.d(a,"default",function(){return D});var t=n("qNsG"),s=n("0iUn"),o=n("sLSF"),m=n("MI3g"),r=n("a7VT"),p=n("Tit0"),c=n("q1tI"),l=n.n(c),i=n("6qfE"),g="How to replace the React Redux with Hooks",d="2019-02-11T00:00:00.000Z",u="2019-02-11-How-to-Replace-Redux-with-Hooks",h=["react"],N=["hooks","redux"],E="2019-02-11_thumb.png",T="React release the game-changer departing from Class programming way.",D=function(e){function a(e){var n;return Object(s.default)(this,a),(n=Object(m.default)(this,Object(r.default)(a).call(this,e))).layout=null,n}return Object(p.default)(a,e),Object(o.default)(a,[{key:"render",value:function(){var e=this.props,a=e.components;Object(t.a)(e,["components"]);return l.a.createElement(i.MDXTag,{name:"wrapper",components:a},l.a.createElement(i.MDXTag,{name:"h1",components:a},"How to replace the Redux with React Hooks"),l.a.createElement(i.MDXTag,{name:"p",components:a},"by moondaddi on 2019-02-11"),l.a.createElement(i.MDXTag,{name:"hr",components:a}),l.a.createElement(i.MDXTag,{name:"h2",components:a},"React Hooks release"),l.a.createElement(i.MDXTag,{name:"p",components:a},"The React team released the React Hooks on version 16.8.0. (",l.a.createElement(i.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://reactjs.org/docs/hooks-intro.html"}},"https://reactjs.org/docs/hooks-intro.html"),")"),l.a.createElement(i.MDXTag,{name:"p",components:a},"The Hooks are the new feature which can lead you not to use ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"class")," anymore in your React app. There are, mainly, three basic hooks, ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"useState"),", ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"useEffect")," and ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"useContext"),". Literally, ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"useState")," is the state hook which allows you to use state in functional component. And ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"useEffect")," is the effect hook which is working like lifecycle API, such as ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"componentDidMount()"),", ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"componentWillUnmount()")," and ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"componentDidUpdate()"),". Lastly, ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"useContext")," is the hook of ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"Context")," created by ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"React.createContext()"),"."),l.a.createElement(i.MDXTag,{name:"p",components:a},"Additionally, there are more hooks ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"useReducer"),", ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"useCallback"),", ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"useMemo"),", ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"useRef"),", etc."),l.a.createElement(i.MDXTag,{name:"h2",components:a},l.a.createElement(i.MDXTag,{name:"a",components:a,parentName:"h2",props:{href:"https://react-redux.js.org/introduction/quick-start"}},"React Redux")),l.a.createElement(i.MDXTag,{name:"p",components:a},"The React Redux is the tool which let you manage the global state in centralized store and use the global state in any component inside the app. It enables you(especially, team size) to control the global state in encapsulated way."),l.a.createElement(i.MDXTag,{name:"h2",components:a},"React Hooks instead of React Redux"),l.a.createElement(i.MDXTag,{name:"p",components:a},"It is possible to replace the React Redux with React Hooks successfully without losing any good purpose of using React Redux with less code and more maintainability."),l.a.createElement(i.MDXTag,{name:"h3",components:a},"Create the store (initValue + reducer)"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-javascript"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-comment"}},"// HooduxStore.js"),"\n\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"const")," initValue = {\n  ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"isLogin"),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-literal"}},"false"),",\n  ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"token"),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'""'),"\n};\n\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"const")," reducer = ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-function"}},"(",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-params"}},"state, action"),") =>")," {\n  ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"switch")," (action.type) {\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"case")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"setLogin"'),":\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"return")," { ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"isLogin"),": action.payload };\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"case")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"setToken"'),":\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"return")," { ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"token"),": action.payload };\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"default"),":\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"throw")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"new")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-built_in"}},"Error"),"(",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"wrong action.type"'),");\n  }\n};")),l.a.createElement(i.MDXTag,{name:"h3",components:a},"Wrap the top level component(eg. App.js) with Context"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-javascript"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-comment"}},"// App.js"),"\n\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"const")," MyContext = React.createContext();\n\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"const")," App = ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-function"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-params"}},"()")," =>")," {\n  ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"const")," [state, dispatch] = useReducer(reducer, initValue);\n\n  ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"return")," (\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"xml"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-tag"}},"<",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-name"}},"MyContext.Provider")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-attr"}},"value"),"=",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-string"}},"{{")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-attr"}},"state"),", ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-attr"}},"dispatch")," }}>"),"\n      "),"<Header />",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"xml"}},"\n      "),"<LogIn />",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"xml"}},"\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-tag"}},"</",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-name"}},"MyContext.Provider"),">"),"\n  );\n};"))),l.a.createElement(i.MDXTag,{name:"blockquote",components:a},l.a.createElement(i.MDXTag,{name:"p",components:a,parentName:"blockquote"},"You can use the context wrapper component in higher order if you like.")),l.a.createElement(i.MDXTag,{name:"h3",components:a},"Pull and use ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"h3"},"state")," and ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"h3"},"dispatch")),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-javascript"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-comment"}},"// Login.js"),"\n\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"const")," { state, dispatch } = useContext(MyContext);\n\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"const")," handleLogin = ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-function"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-params"}},"()")," =>")," {\n  dispatch({ ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"type"),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"setLogin"'),", ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"payload"),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-literal"}},"true")," });\n};\n\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"return")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"xml"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-tag"}},"<",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-name"}},"div"),">"),'{state.isLogin ? "You are logged in" : "Not logged in"}',l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-tag"}},"</",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-name"}},"div"),">")),";")),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Conclusion"),l.a.createElement(i.MDXTag,{name:"p",components:a},l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"useReducer")," make a lot easier to pull and use the ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"state")," and ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"dispatch")," instead of using ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"connect()")," in React Redux. If you're familiar with it, you know how it works. In React Redux,every single component, you want to use ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"state")," or ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"dispatch"),", needs to be connected. But with ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"useReducer"),", you need to call it just once in component if you want it to be."))}}]),a}(l.a.Component);D.isMDXComponent=!0},RSLW:function(e,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t,s=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},o=function(){function e(e,a){for(var n=0;n<a.length;n++){var t=a[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(a,n,t){return n&&e(a.prototype,n),t&&e(a,t),a}}(),m=n("q1tI"),r=(t=m)&&t.__esModule?t:{default:t},p=n("Fobl");var c={inlineCode:"code",wrapper:"div"},l=function(e){function a(){return function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,a){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?e:a}(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(e,a):e.__proto__=a)}(a,m.Component),o(a,[{key:"render",value:function(){var e=this.props,a=e.name,n=e.parentName,t=e.props,o=void 0===t?{}:t,m=e.children,p=e.components,l=void 0===p?{}:p,i=e.Layout,g=e.layoutProps,d=l[n+"."+a]||l[a]||c[a]||a;return i?r.default.createElement(i,s({components:l},g),r.default.createElement(d,o,m)):r.default.createElement(d,o,m)}}]),a}();a.default=(0,p.withMDXComponents)(l)},SeoB:function(e,a,n){var t={"./2018-08-24-First-Post.md":"CSM1","./2018-08-24-Markdown-summary.md":"dhB5","./2018-08-25-Making-virtualenv-for-Django.md":"ua6i","./2018-08-28-File-upload-with-GraphQL-Apollo-Client-Django-Graphene.md":"XpG/","./2018-08-30-How-to-align-element-to-vertical-center.md":"KRji","./2018-08-31-Nested-Comment-Reply-sturcture-with-ReactJS.md":"p5Y2","./2018-09-01-How-to-highlight-code-in-jekyll.md":"6cft","./2018-09-08-How-to-set-state-with-data-from-graphQL-query.md":"+vdH","./2018-09-27-postmaster-pid-Location.md":"Moqv","./2018-12-10-Netplan-how-to-connect-wpa2-linux.md":"dw4x","./2018-12-18-AWS-EB-Load-Balancer-redirect-to-https.md":"y4r3","./2018-12-24-Deploy-Prisma-Server-to-AWS-with-Docker.md":"c6bw","./2019-01-11-Deploy-Nextjs-app-to-AWS-Lambda.md":"wdB0","./2019-02-11-How-to-Replace-Redux-with-Hooks.md":"PRoP","./2019-02-25-Commands-for-Postgres-DB-setup.md":"rd9m","./2019-03-05-Kill-Process-Using-Port.md":"mlUH"};function s(e){var a=o(e);return n(a)}function o(e){var a=t[e];if(!(a+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return a}s.keys=function(){return Object.keys(t)},s.resolve=o,e.exports=s,s.id="SeoB"},Tit0:function(e,a,n){"use strict";n.r(a);var t=n("SqZg"),s=n.n(t),o=n("TRZx"),m=n.n(o);function r(e,a){return(r=m.a||function(e,a){return e.__proto__=a,e})(e,a)}function p(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");e.prototype=s()(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),a&&r(e,a)}n.d(a,"default",function(){return p})},"V+17":function(e,a,n){"use strict";n.r(a);var t=n("q1tI"),s=n.n(t),o=n("20a2"),m=n("IRSK"),r=n.n(m),p=n("9X6Z");a.default=Object(o.withRouter)(function(e){if(e.router&&e.router.query&&e.router.query.filename){var a=e.router.query.filename,n=r.a.filter(function(e){return e.filename===a});return n.length>0?s.a.createElement(p.default,{post:n[0]}):s.a.createElement("div",null,"404!")}return s.a.createElement("div",null,"404!")})},"XpG/":function(e,a,n){"use strict";n.r(a),n.d(a,"title",function(){return g}),n.d(a,"createdAt",function(){return d}),n.d(a,"filename",function(){return u}),n.d(a,"category",function(){return h}),n.d(a,"tag",function(){return N}),n.d(a,"thumb",function(){return E}),n.d(a,"slug",function(){return T}),n.d(a,"default",function(){return D});var t=n("qNsG"),s=n("0iUn"),o=n("sLSF"),m=n("MI3g"),r=n("a7VT"),p=n("Tit0"),c=n("q1tI"),l=n.n(c),i=n("6qfE"),g="File upload with GraphQL Apollo client & Django + Graphene",d="2018-08-28T00:00:00.000Z",u="2018-08-28-File-upload-with-GraphQL-Apollo-Client-Django-Graphene",h=["django"],N=["django","graphql","graphene","apollo"],E="2018-08-28_thumb.png",T="The Graphene is the pain.",D=function(e){function a(e){var n;return Object(s.default)(this,a),(n=Object(m.default)(this,Object(r.default)(a).call(this,e))).layout=null,n}return Object(p.default)(a,e),Object(o.default)(a,[{key:"render",value:function(){var e=this.props,a=e.components;Object(t.a)(e,["components"]);return l.a.createElement(i.MDXTag,{name:"wrapper",components:a},l.a.createElement(i.MDXTag,{name:"h1",components:a},"File upload with GraphQL Apollo client & Django + Graphene"),l.a.createElement(i.MDXTag,{name:"p",components:a},"by moondaddi on 2018-08-28"),l.a.createElement(i.MDXTag,{name:"hr",components:a}),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Requirements"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," pip install django"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," pip install graphene_django"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," pip install graphene-file-upload"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," pip install python-resize-image"))),l.a.createElement(i.MDXTag,{name:"ul",components:a},l.a.createElement(i.MDXTag,{name:"li",components:a,parentName:"ul"},"Django==2.0.7"),l.a.createElement(i.MDXTag,{name:"li",components:a,parentName:"ul"},"graphene==2.1.2"),l.a.createElement(i.MDXTag,{name:"li",components:a,parentName:"ul"},"graphene-django==2.0.0"),l.a.createElement(i.MDXTag,{name:"li",components:a,parentName:"ul"},"graphene-file-upload==1.0.0"),l.a.createElement(i.MDXTag,{name:"li",components:a,parentName:"ul"},"graphql-core==2.0"),l.a.createElement(i.MDXTag,{name:"li",components:a,parentName:"ul"},"graphql-relay==0.4.5"),l.a.createElement(i.MDXTag,{name:"li",components:a,parentName:"ul"},"python-resize-image==1.1.11")),l.a.createElement("br",null),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Backend"),l.a.createElement(i.MDXTag,{name:"blockquote",components:a},l.a.createElement(i.MDXTag,{name:"p",components:a,parentName:"blockquote"},"Mutation part")),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-python"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"import")," graphene\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"from")," graphene_django ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"import")," DjangoObjectType\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"from")," graphene_file_upload.scalars ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"import")," Upload\n\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-class"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-keyword"}},"class")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-title"}},"CUDNewsBoard"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-params"}},"(graphene.Mutation)"),":"),"\n  newsboard = graphene.Field(NewsBoardType)\n\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-class"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-keyword"}},"class")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-title"}},"Arguments"),":")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-comment"}},"# other arguments up here..."),"\n  files = Upload()\n\n  ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-function"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-keyword"}},"def")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-title"}},"mutate"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-params"}},"(self, info, files=None, ...)"),":"),"\n    user = info.context.user\n\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"if")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"not")," user.is_staff:\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"raise")," Exception(",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'Admin permission is required!'"),")\n\n    post = NewsBoard(user=user, title=title, content=content)\n    post.save()\n\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"if")," files:\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"for")," file ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"in")," files:\n\n        postimage = NewsBoardImage(post=post, image=",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"None"),")\n        postimage.save()\n\n        image_obj = Image.open(file)\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-comment"}},"# resize image"),"\n        image_obj = resizeimage.resize_width(image_obj, ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-number"}},"800"),", validate=",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"False"),")\n\n        new_image_io = BytesIO()\n        image_obj.save(new_image_io, image_obj.format)\n\n        temp_name = file.name\n\n        postimage.image.save(\n          temp_name,\n          content=ContentFile(new_image_io.getvalue())\n        )\n\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"return")," CUDNewsBoard(newsboard=post)")),l.a.createElement("br",null),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Frontend"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-javascript"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"const")," NEW_POST_NEWS = gql",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"`\nmutation postNew($files: Upload, ...) {\n  cudNewsboard(files: $files, ...) {\n    newsboard {\n      id\n      user {\n        id\n        fullname\n      }\n      title\n      content\n      firstDate\n      views\n      likes {\n        id\n      }\n      newsboardimages {\n        id\n        image\n      }\n    }\n  }\n}\n`"),";\n\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-class"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-keyword"}},"class")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-title"}},"BoardNewsInput")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-keyword"}},"extends")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-title"}},"Component")," "),"{\n  state = {\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"images"),": []\n  };\n\n  render() {\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"return")," (\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"xml"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-tag"}},"<",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-name"}},"div"),">"),"\n        "),'<input\n          type="file"\n          name="image"\n          onChange={({\n            target: {\n              validity,\n              files: [file]\n            }\n          }) =>\n            validity.valid &&\n            this.setState({\n              images: [...this.state.images, file]\n            })\n          }\n        />\n        <Mutation\n          mutation={NEW_POST_NEWS}\n          variables={{\n            files: this.state.images ? this.state.images : null\n          }}\n        >\n          {(cudNewsboard, { loading, error, data }) => (\n            <button\n              onClick={() => {\n                cudNewsboard();\n              }}\n            >\n              POST\n            </button>\n          )}\n        </Mutation>\n      </div>',l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"xml"}},"\n    );\n  }\n}"))),l.a.createElement("br",null),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Lesson & Learn"),l.a.createElement(i.MDXTag,{name:"ol",components:a},l.a.createElement(i.MDXTag,{name:"li",components:a,parentName:"ol"},"Array can be substitutive for FileList object in this case.")),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-javascript"}},"state = {\n  ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"images"),": [file, file, file, ...]\n}")),l.a.createElement("br",null),l.a.createElement(i.MDXTag,{name:"ol",components:a,props:{start:2}},l.a.createElement(i.MDXTag,{name:"li",components:a,parentName:"ol"},"Input onChange method")),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-javascript"}},"<input\n  onChange={({ validity, ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"files"),": [file] }) =>\n    validity.valid &&\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"this"),".setState(",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-function"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-params"}},"prevState")," =>")," {\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"images"),": [...prevState.images, file];\n    })\n  }\n/>")),l.a.createElement("br",null),l.a.createElement(i.MDXTag,{name:"h2",components:a},"References"))}}]),a}(l.a.Component);D.isMDXComponent=!0},a7VT:function(e,a,n){"use strict";n.r(a),n.d(a,"default",function(){return r});var t=n("Bhuq"),s=n.n(t),o=n("TRZx"),m=n.n(o);function r(e){return(r=m.a?s.a:function(e){return e.__proto__||s()(e)})(e)}},c6bw:function(e,a,n){"use strict";n.r(a),n.d(a,"title",function(){return g}),n.d(a,"createdAt",function(){return d}),n.d(a,"filename",function(){return u}),n.d(a,"category",function(){return h}),n.d(a,"tag",function(){return N}),n.d(a,"thumb",function(){return E}),n.d(a,"slug",function(){return T}),n.d(a,"default",function(){return D});var t=n("qNsG"),s=n("0iUn"),o=n("sLSF"),m=n("MI3g"),r=n("a7VT"),p=n("Tit0"),c=n("q1tI"),l=n.n(c),i=n("6qfE"),g="Deploy the Prisma Server to AWS ECS and EC2 with Docker",d="2018-12-24T00:00:00.000Z",u="2018-12-24-Deploy-Prisma-Server-to-AWS-with-Docker",h=["backend"],N=["aws","graphql","prisma","ecs"],E="2018-12-24_thumb.png",T="Fix the bugs!",D=function(e){function a(e){var n;return Object(s.default)(this,a),(n=Object(m.default)(this,Object(r.default)(a).call(this,e))).layout=null,n}return Object(p.default)(a,e),Object(o.default)(a,[{key:"render",value:function(){var e=this.props,a=e.components;Object(t.a)(e,["components"]);return l.a.createElement(i.MDXTag,{name:"wrapper",components:a},l.a.createElement(i.MDXTag,{name:"h1",components:a},"Deploy the Prisma Server to the AWS EC2 with Docker"),l.a.createElement(i.MDXTag,{name:"p",components:a},"by moondaddi on 2018-12-24"),l.a.createElement(i.MDXTag,{name:"hr",components:a}),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Prisma?"),l.a.createElement(i.MDXTag,{name:"p",components:a},"Simply, the ",l.a.createElement(i.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://www.prisma.io/"}},"Prisma")," is the new ORM(",l.a.createElement(i.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://en.wikipedia.org/wiki/Object-relational_mapping"}},"Object Relational Mapping"),") based on GraphQL query language. The Prisma can make your whole workflow to set up the graphQL API a lot easier. All you need is only graphQL schema in order to set up the graphQL API."),l.a.createElement(i.MDXTag,{name:"blockquote",components:a},l.a.createElement(i.MDXTag,{name:"p",components:a,parentName:"blockquote"},"ex. GraphQL schema")),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-js"}},"type Tweet {\n  ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"id"),": ID! @unique\n  createdAt: DateTime!\n  text: ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-built_in"}},"String"),"!\n  owner: User!\n  location: Location!\n}\n\ntype User {\n  ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"id"),": ID! @unique\n  createdAt: DateTime!\n  updatedAt: DateTime!\n  handle: ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-built_in"}},"String"),"! @unique\n  name: ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-built_in"}},"String"),"\n  tweets: [Tweet!]!\n}\n\ntype Location {\n  ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"latitude"),": Float!\n  longitude: Float!\n}")),l.a.createElement(i.MDXTag,{name:"p",components:a},"If you make your graphQL schema to ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"datamodel.prisma")," file. It's all set. Prisma will deploy your schema to the connected DB(Prisma Cloud or your Remote DB/Local DB) and generate all kind of graphQL schema (types and resolvers) for you automatically. Fantastic, isn't it?"),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Structure"),l.a.createElement(i.MDXTag,{name:"p",components:a},l.a.createElement(i.MDXTag,{name:"img",components:a,parentName:"p",props:{src:"/static/images/post_img/2018-12-24_prisma_structure.jpg",alt:"Prisma structure"}})),l.a.createElement(i.MDXTag,{name:"blockquote",components:a},l.a.createElement(i.MDXTag,{name:"p",components:a,parentName:"blockquote"},"GraphQL API Server = GraphQL API + Prisma Server")),l.a.createElement(i.MDXTag,{name:"p",components:a},"Prisma API Server consists of two parts, ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"GraphQL API")," + ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"Prisma Server"),". GraphQL API is the backend layer which contains your business logic, such as querying users, sign up, log in, locations, and so on. You can set it up with Express or GraphQL Yoga, etc. Otherwise, Prisma Server means the backend server which contains all the graphQL schema as per your data model and is connected to database. Prisma suggests the Docker in order to set up Prisma Server."),l.a.createElement(i.MDXTag,{name:"p",components:a},"This post will explain how to deploy this Prisma Server to AWS ECS and ECR service."),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Deploy the Prisma Server"),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Requirements"),l.a.createElement(i.MDXTag,{name:"ul",components:a},l.a.createElement(i.MDXTag,{name:"li",components:a,parentName:"ul"},l.a.createElement(i.MDXTag,{name:"p",components:a,parentName:"li"},"Docker"),l.a.createElement(i.MDXTag,{name:"blockquote",components:a,parentName:"li"},l.a.createElement(i.MDXTag,{name:"p",components:a,parentName:"blockquote"},"(for mac) ",l.a.createElement(i.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://hub.docker.com/editions/community/docker-ce-desktop-mac"}},"https://hub.docker.com/editions/community/docker-ce-desktop-mac")))),l.a.createElement(i.MDXTag,{name:"li",components:a,parentName:"ul"},l.a.createElement(i.MDXTag,{name:"p",components:a,parentName:"li"},"Prisma Cli"))),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," npm i -g prisma"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"#"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," or"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," yarn global add prisma"))),l.a.createElement(i.MDXTag,{name:"h2",components:a},"(Option 1) Using Docker machine"),l.a.createElement(i.MDXTag,{name:"p",components:a},"This is using docker-machine in cli. The docker-machine will create a docker machine on AWS EC2 directly. and docker-compose will compose the prisma server along with ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"docker-compse.yml")," in docker-machine."),l.a.createElement(i.MDXTag,{name:"h3",components:a},"Create the docker machine on AWS EC2"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," docker-machine create --driver amazonec2 --amazonec2-region ap-northeast-2 --amazonec2-vpc-id __SPECIFIC_VPC__ prisma-server-example"))),l.a.createElement(i.MDXTag,{name:"ul",components:a},l.a.createElement(i.MDXTag,{name:"li",components:a,parentName:"ul"},"If creating EC2 instance is failed, check your AWS credentials and IAM policy.")),l.a.createElement(i.MDXTag,{name:"h3",components:a},"Activate new machine as active host"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," docker-machine prisma-server-example"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-built_in"}},"eval")," $(docker-machine env prisma-server-example)"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"\n#"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," check docker-machine"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," docker-machine ls"))),l.a.createElement(i.MDXTag,{name:"h3",components:a},l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"h3"},"docker-compose.yml")," file"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-yml"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"version:")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"3"'),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"services:"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"  prisma:"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"    image:")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"prismagraphql/prisma:1.23"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"    restart:")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"always"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"    ports:"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-bullet"}},"      -")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"4466:4466"'),"\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-comment"}},"# logging available in AWS CloudWatch"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"    logging:"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"      driver:")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"awslogs"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"      options:"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"        awslogs-group:")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"__AWSLOG_GROUP__"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"        awslogs-region:")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"ap-northeast-2"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"        awslogs-stream-prefix:")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"__AWSLOG_STREAM_PREFIX__"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"    environment:"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"      PRISMA_CONFIG:")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"|\n"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"        port:")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-number"}},"4466"),"\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-comment"}},"# managementApiSecret: __SECRET_KEY__"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"        databases:"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"          default:"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"            connector:")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"postgres")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-comment"}},"# PostgreSQL"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"            host:")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"__AWS_RDS_HOST__"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"            database:")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"__DB_NAME__"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"            schema:")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"__DB_SCHEMA__"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"            user:")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"__DB_USERNAME__"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"            password:")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"__DB_PASSWORD__"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"            rawAccess:")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-literal"}},"true"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"            port:")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-number"}},"5432"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"            migrations:")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-literal"}},"false"))),l.a.createElement(i.MDXTag,{name:"h3",components:a},"Compose Prisma Server in new docker machine"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},"docker compose up -d")),l.a.createElement(i.MDXTag,{name:"h3",components:a},"Assign security group and check inbound rules"),l.a.createElement(i.MDXTag,{name:"ul",components:a},l.a.createElement(i.MDXTag,{name:"li",components:a,parentName:"ul"},"Basically, EC2 is assigned new security group as defalut. You need to check its inbound rule and open 4466 port.")),l.a.createElement(i.MDXTag,{name:"h3",components:a},"Set the elastic load balancer (optional)"),l.a.createElement(i.MDXTag,{name:"h3",components:a},"Modify prisma.yml"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-yml"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"endpoint:")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"http://__AWS_EC2_ADDRESS__:4466"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"datamodel:")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"datamodel.prisma"),"\n\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"generate:"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"  - generator:")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"javascript-client"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"    output:")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"./generated/prisma-client/"))),l.a.createElement(i.MDXTag,{name:"h3",components:a},"Deploy datamodel.prisma to Prisma Server in AWS EC2"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," PRISMA_MANAGEMENT_API_SECRET=__SECRET_KEY__ prisma deploy"))),l.a.createElement(i.MDXTag,{name:"h3",components:a},"Generate prisma client for GraphQL API"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," prisma generate"))),l.a.createElement(i.MDXTag,{name:"p",components:a},"References"),l.a.createElement(i.MDXTag,{name:"blockquote",components:a},l.a.createElement(i.MDXTag,{name:"p",components:a,parentName:"blockquote"},l.a.createElement(i.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://docs.docker.com/machine/drivers/aws/"}},"https://docs.docker.com/machine/drivers/aws/")," ",l.a.createElement(i.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://docs.docker.com/machine/examples/aws/#step-2-use-machine-to-create-the-instance"}},"https://docs.docker.com/machine/examples/aws/#step-2-use-machine-to-create-the-instance"))),l.a.createElement(i.MDXTag,{name:"hr",components:a}),l.a.createElement(i.MDXTag,{name:"h2",components:a},"(Option 2) Using AWS ECS Cli"),l.a.createElement(i.MDXTag,{name:"h3",components:a},"Create EC2 and ECS cluster"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," ecs-cli up --keypair __AWS_KEYPAIR_NAME__ --capability-iam --vpc __SPECIFIC_VPC__ --subnets __SUBNET_1__,__SUBNET_2__ --size 1 --instance-type t2.micro --cluster-config prisma-server-ecs"))),l.a.createElement(i.MDXTag,{name:"ul",components:a},l.a.createElement(i.MDXTag,{name:"li",components:a,parentName:"ul"},"It will generate the cloudformation which will proceed the whole process to generate EC2 instance and ECS cluster.")),l.a.createElement(i.MDXTag,{name:"h3",components:a},"Compose the Prisma Server to ECS container"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," ecs-cli compose up --create-log-groups --cluster-config prisma-server-ecs"))),l.a.createElement(i.MDXTag,{name:"ul",components:a},l.a.createElement(i.MDXTag,{name:"li",components:a,parentName:"ul"},"It will generate the new Task definition. You can check the new Task definition is runnig.")),l.a.createElement(i.MDXTag,{name:"h3",components:a},"Check if the new Task definition is running"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," esc-cli ps"))),l.a.createElement(i.MDXTag,{name:"ul",components:a},l.a.createElement(i.MDXTag,{name:"li",components:a,parentName:"ul"},"If your new Task definition is working well, you might want to make new service in ECS cluster in order to manage the task.")),l.a.createElement(i.MDXTag,{name:"p",components:a},"References"),l.a.createElement(i.MDXTag,{name:"blockquote",components:a},l.a.createElement(i.MDXTag,{name:"p",components:a,parentName:"blockquote"},l.a.createElement(i.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://docs.aws.amazon.com/ko_kr/AmazonECR/latest/userguide/ECR_AWSCLI.html"}},"https://docs.aws.amazon.com/ko_kr/AmazonECR/latest/userguide/ECR_AWSCLI.html")," > ",l.a.createElement(i.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://docs.aws.amazon.com/ko_kr/AmazonECS/latest/developerguide/ECS_CLI_tutorial_EC2.html"}},"https://docs.aws.amazon.com/ko_kr/AmazonECS/latest/developerguide/ECS_CLI_tutorial_EC2.html"))))}}]),a}(l.a.Component);D.isMDXComponent=!0},dhB5:function(e,a,n){"use strict";n.r(a),n.d(a,"title",function(){return g}),n.d(a,"createdAt",function(){return d}),n.d(a,"filename",function(){return u}),n.d(a,"category",function(){return h}),n.d(a,"tag",function(){return N}),n.d(a,"thumb",function(){return E}),n.d(a,"slug",function(){return T}),n.d(a,"default",function(){return D});var t=n("qNsG"),s=n("0iUn"),o=n("sLSF"),m=n("MI3g"),r=n("a7VT"),p=n("Tit0"),c=n("q1tI"),l=n.n(c),i=n("6qfE"),g="Markdown summary",d="2018-08-24T00:00:00.000Z",u="2018-08-24-Markdown-summary",h=["devlogs"],N=["markdown","summary"],E="2018-08-24_thumb.png",T="Hard to remember",D=function(e){function a(e){var n;return Object(s.default)(this,a),(n=Object(m.default)(this,Object(r.default)(a).call(this,e))).layout=null,n}return Object(p.default)(a,e),Object(o.default)(a,[{key:"render",value:function(){var e=this.props,a=e.components;Object(t.a)(e,["components"]);return l.a.createElement(i.MDXTag,{name:"wrapper",components:a},l.a.createElement(i.MDXTag,{name:"h1",components:a},"Markdown Summary for future me"),l.a.createElement(i.MDXTag,{name:"p",components:a},"by moondaddi on 2018-08-24"),l.a.createElement(i.MDXTag,{name:"hr",components:a}),l.a.createElement(i.MDXTag,{name:"h3",components:a},"a Note for future me about Markdown syntax"),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Headers"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-markdown"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-section"}},"# H1"),"\n\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-section"}},"## H2"),"\n\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-section"}},"### H3"),"\n\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-section"}},"#### H4"),"\n\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-section"}},"##### H5"),"\n\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-section"}},"###### H6"))),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Blockquote"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-markdown"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-quote"}},"> This is a blockquote"))),l.a.createElement(i.MDXTag,{name:"blockquote",components:a},l.a.createElement(i.MDXTag,{name:"p",components:a,parentName:"blockquote"},"This is a blockquote")),l.a.createElement(i.MDXTag,{name:"h2",components:a},"List"),l.a.createElement(i.MDXTag,{name:"h3",components:a},"1) Ordered"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-markdown"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-bullet"}},"1. "),"first\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-bullet"}},"2. "),"second\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-bullet"}},"3. "),"third")),l.a.createElement(i.MDXTag,{name:"ol",components:a},l.a.createElement(i.MDXTag,{name:"li",components:a,parentName:"ol"},"first"),l.a.createElement(i.MDXTag,{name:"li",components:a,parentName:"ol"},"second"),l.a.createElement(i.MDXTag,{name:"li",components:a,parentName:"ol"},"thrid")),l.a.createElement(i.MDXTag,{name:"h3",components:a},"2) UnOrdered"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-markdown"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-bullet"}},"- "),"Red\n  - Green\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-code"}},"    - Blue"),"\n\nor '+', '-', '='")),l.a.createElement(i.MDXTag,{name:"ul",components:a},l.a.createElement(i.MDXTag,{name:"li",components:a,parentName:"ul"},"Red",l.a.createElement(i.MDXTag,{name:"ul",components:a,parentName:"li"},l.a.createElement(i.MDXTag,{name:"li",components:a,parentName:"ul"},"Green",l.a.createElement(i.MDXTag,{name:"ul",components:a,parentName:"li"},l.a.createElement(i.MDXTag,{name:"li",components:a,parentName:"ul"},"Blue")))))),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Code"),l.a.createElement(i.MDXTag,{name:"p",components:a},"4 space spacing or 1 tab"),l.a.createElement(i.MDXTag,{name:"blockquote",components:a},l.a.createElement(i.MDXTag,{name:"p",components:a,parentName:"blockquote"},"linebreak often breaks the markdown block")),l.a.createElement(i.MDXTag,{name:"h2",components:a},"5. Horizontal Line"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-markdown"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-section"}},"---\n---"),"\n---\n\n---\n\n---")),l.a.createElement(i.MDXTag,{name:"hr",components:a}),l.a.createElement(i.MDXTag,{name:"h2",components:a},"6. Link"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-markdown"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"xml"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-tag"}},"<",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-name"}},"https:"),"//",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-attr"}},"www.google.com"),">")),"\n[",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"Google"),"](",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-link"}},"https://www.google.com"),")")),l.a.createElement(i.MDXTag,{name:"p",components:a},l.a.createElement(i.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://www.google.com"}},"https://www.google.com"),l.a.createElement("br",null),"\n",l.a.createElement(i.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://www.google.com"}},"Google")),l.a.createElement(i.MDXTag,{name:"h2",components:a},"7. Text Style"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-markdown"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-emphasis"}},"_italic_")," or ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-emphasis"}},"_italic_"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-strong"}},"**bold**")," or ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-strong"}},"**bold**"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-strong"}},"**_italic bold_*"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-bullet"}},"* or *"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-strong"}},"*_italic bold_*"),"*\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"xml"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-tag"}},"<",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-name"}},"u"),">")),"underline",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"xml"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-tag"}},"</",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-name"}},"u"),">")),"\n~~canceline~~")),l.a.createElement(i.MDXTag,{name:"p",components:a},l.a.createElement(i.MDXTag,{name:"em",components:a,parentName:"p"},"italic"),l.a.createElement("br",null),"\n",l.a.createElement(i.MDXTag,{name:"strong",components:a,parentName:"p"},"bold"),l.a.createElement("br",null),"\n",l.a.createElement(i.MDXTag,{name:"strong",components:a,parentName:"p"},l.a.createElement(i.MDXTag,{name:"em",components:a,parentName:"strong"},"italic bold")),l.a.createElement("br",null),"\n",l.a.createElement("u",null,"underline"),l.a.createElement("br",null),"\n",l.a.createElement(i.MDXTag,{name:"del",components:a,parentName:"p"},"canceline")),l.a.createElement(i.MDXTag,{name:"h2",components:a},"8. Image"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-markdown"}},"![",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"Alt text"),"](",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-link"}},"/path/to/img.jpg"),")\n![",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"Alt text"),"](",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-link"}},'/path/to/img.jpg "Optional title"'),")")),l.a.createElement(i.MDXTag,{name:"blockquote",components:a},l.a.createElement(i.MDXTag,{name:"p",components:a,parentName:"blockquote"},"Note: Size control is not supported.")),l.a.createElement(i.MDXTag,{name:"h2",components:a},"9. Line break"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-markdown"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"xml"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-tag"}},"<",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-name"}},"br")," />")))))}}]),a}(l.a.Component);D.isMDXComponent=!0},dw4x:function(e,a,n){"use strict";n.r(a),n.d(a,"title",function(){return g}),n.d(a,"createdAt",function(){return d}),n.d(a,"filename",function(){return u}),n.d(a,"category",function(){return h}),n.d(a,"tag",function(){return N}),n.d(a,"thumb",function(){return E}),n.d(a,"slug",function(){return T}),n.d(a,"default",function(){return D});var t=n("qNsG"),s=n("0iUn"),o=n("sLSF"),m=n("MI3g"),r=n("a7VT"),p=n("Tit0"),c=n("q1tI"),l=n.n(c),i=n("6qfE"),g="How to connect to wireless WPA2 with Netplan",d="2018-12-10T00:00:00.000Z",u="2018-12-10-Netplan-how-to-connect-wpa2-linux",h=["devlogs"],N=["netplan","linux","wireless"],E="2018-12-10_thumb.png",T="Hard to remember",D=function(e){function a(e){var n;return Object(s.default)(this,a),(n=Object(m.default)(this,Object(r.default)(a).call(this,e))).layout=null,n}return Object(p.default)(a,e),Object(o.default)(a,[{key:"render",value:function(){var e=this.props,a=e.components;Object(t.a)(e,["components"]);return l.a.createElement(i.MDXTag,{name:"wrapper",components:a},l.a.createElement(i.MDXTag,{name:"h1",components:a},"[Linux]"," How to connect to wireless WPA2 with Netplan"),l.a.createElement(i.MDXTag,{name:"p",components:a},"by moondaddi on 2018-12-10"),l.a.createElement(i.MDXTag,{name:"hr",components:a}),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Netplan?"),l.a.createElement(i.MDXTag,{name:"p",components:a},"Netplan is the utility for easily configuring networking on a linux system. Ubuntu 17.10 starts including the netplan by default instead of deprecated ifupdown."),l.a.createElement(i.MDXTag,{name:"h2",components:a},"How to connect"),l.a.createElement(i.MDXTag,{name:"h3",components:a},"Configure ","*",".yaml"),l.a.createElement(i.MDXTag,{name:"p",components:a},"Make new file with any name ","*",".yaml in ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"/etc/netplan"),"\nYou can make as many configuration files as you want. In that case, ","*",".yaml files will be applied by alphbetically."),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},'network:\n  version: 2\n    renderer: networkd\n    ethernets:  # this is for lan\n      enp2s0:\n        addresses: []\n        dhcp4: true\n    wifis:  # this is for wlan\n      wlp3s0:  # wlan interface\n        access-points: "SSID":  # your SSID\n          password: "PASWORD"  # your PASSWORD\n        dhcp4: no\n        dhcp6: true\n        addresses: [192.168.0.200/24]  # set the static IP\n        gateway4: 192.168.0.1  # gateway\n        nameservers:\n          addresses: [192.168.0.1,8.8.8.8,8.8.4.4]')),l.a.createElement(i.MDXTag,{name:"blockquote",components:a},l.a.createElement(i.MDXTag,{name:"p",components:a,parentName:"blockquote"},"How to check wlan interface")),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," iwconfig"))),l.a.createElement(i.MDXTag,{name:"h3",components:a},"Generate conf"),l.a.createElement(i.MDXTag,{name:"p",components:a},"The configuration files ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"/etc/netplan/*.yaml")," needs to be generated before applying to system. The ",l.a.createElement(i.MDXTag,{name:"em",components:a,parentName:"p"},".conf files will be generated in `/run/netplan/"),".conf` which shadow completely YAML files."),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," sudo netplan --debug generate"))),l.a.createElement(i.MDXTag,{name:"h3",components:a},"Apply the generated conf"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," sudo netplan apply"))),l.a.createElement(i.MDXTag,{name:"h3",components:a},"References"),l.a.createElement(i.MDXTag,{name:"p",components:a},"Netplan reference page (",l.a.createElement(i.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://netplan.io/reference"}},"https://netplan.io/reference"),")"))}}]),a}(l.a.Component);D.isMDXComponent=!0},mlUH:function(e,a,n){"use strict";n.r(a),n.d(a,"title",function(){return g}),n.d(a,"createdAt",function(){return d}),n.d(a,"filename",function(){return u}),n.d(a,"category",function(){return h}),n.d(a,"tag",function(){return N}),n.d(a,"thumb",function(){return E}),n.d(a,"slug",function(){return T}),n.d(a,"default",function(){return D});var t=n("qNsG"),s=n("0iUn"),o=n("sLSF"),m=n("MI3g"),r=n("a7VT"),p=n("Tit0"),c=n("q1tI"),l=n.n(c),i=n("6qfE"),g="Kill the process using port",d="2019-03-05T00:00:00.000Z",u="2019-03-05-Kill-Process-Using-Port",h=["devlogs"],N=["macos","kill","port"],E="2019-03-05_thumb.jpg",T="Kill the process occupying the TCP port in abnormal and unintended way.",D=function(e){function a(e){var n;return Object(s.default)(this,a),(n=Object(m.default)(this,Object(r.default)(a).call(this,e))).layout=null,n}return Object(p.default)(a,e),Object(o.default)(a,[{key:"render",value:function(){var e=this.props,a=e.components;Object(t.a)(e,["components"]);return l.a.createElement(i.MDXTag,{name:"wrapper",components:a},l.a.createElement(i.MDXTag,{name:"h1",components:a},"Kill the process occupying a specific port"),l.a.createElement(i.MDXTag,{name:"p",components:a},"by Moondaddi on 2019-03-05"),l.a.createElement(i.MDXTag,{name:"hr",components:a}),l.a.createElement(i.MDXTag,{name:"p",components:a},"Sometimes you can encounter this error which says another process is already occupying the port. You can kill the app or process if you can, the problem is, sometimes it is not available. For example when app was teminated by abnormal ways, it remains and occupy the communication port in background."),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Check the current process using specific port"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," lsof -i:3000"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"\n#"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," output"),"\nCOMMAND     PID   USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME\nrust_grap 92304 myuser    3u  IPv4 0xffffffffffffffff      0t0  TCP localhost:arepa-cas (LISTEN)")),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Kill the process"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-built_in"}},"kill")," -9 92304"))),l.a.createElement(i.MDXTag,{name:"blockquote",components:a},l.a.createElement(i.MDXTag,{name:"p",components:a,parentName:"blockquote"},"use PID number (eg. 92304)")))}}]),a}(l.a.Component);D.isMDXComponent=!0},p5Y2:function(e,a,n){"use strict";n.r(a),n.d(a,"title",function(){return g}),n.d(a,"createdAt",function(){return d}),n.d(a,"filename",function(){return u}),n.d(a,"category",function(){return h}),n.d(a,"tag",function(){return N}),n.d(a,"thumb",function(){return E}),n.d(a,"slug",function(){return T}),n.d(a,"default",function(){return D});var t=n("qNsG"),s=n("0iUn"),o=n("sLSF"),m=n("MI3g"),r=n("a7VT"),p=n("Tit0"),c=n("q1tI"),l=n.n(c),i=n("6qfE"),g="Nested Comment Reply stucture with ReactJS",d="2018-08-31T00:00:00.000Z",u="2018-08-31-Nested-Comment-Reply-sturcture-with-ReactJS",h=["react"],N=["react","comment"],E="2018-08-31_thumb.jpg",T="Comment structure implementation",D=function(e){function a(e){var n;return Object(s.default)(this,a),(n=Object(m.default)(this,Object(r.default)(a).call(this,e))).layout=null,n}return Object(p.default)(a,e),Object(o.default)(a,[{key:"render",value:function(){var e=this.props,a=e.components;Object(t.a)(e,["components"]);return l.a.createElement(i.MDXTag,{name:"wrapper",components:a},l.a.createElement(i.MDXTag,{name:"h1",components:a},"Nested Comment Reply stucture with ReactJS"),l.a.createElement(i.MDXTag,{name:"p",components:a},"by moondaddi on 2018-08-31"),l.a.createElement(i.MDXTag,{name:"hr",components:a}),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Nested Comment Reply structure?"),l.a.createElement(i.MDXTag,{name:"p",components:a},l.a.createElement(i.MDXTag,{name:"img",components:a,parentName:"p",props:{src:"/static/images/post_img/2018-08-31_nested-structure.jpg",alt:"Nested Comment Structure"}})),l.a.createElement("br",null),l.a.createElement(i.MDXTag,{name:"h2",components:a},"How-to with ReactJS"),l.a.createElement(i.MDXTag,{name:"p",components:a},"It can be resolve with loop structures with ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"<Comment />")," and ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"<Comments>")),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-javascript"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"const")," Comments = ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-function"}},"(",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-params"}},"{ items, postId, commentId, level, history }"),") =>")," {\n  ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"if")," (items) {\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"return")," items.map(",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-function"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-params"}},"item")," =>")," {\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"if")," (!item.parentComment || level !== ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-number"}},"0"),") {\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"return")," (\n          ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"xml"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-tag"}},"<",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-name"}},"Comment"),"\n            ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-attr"}},"item"),"=",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-string"}},"{item}"),"\n            ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-attr"}},"postId"),"=",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-string"}},"{postId}"),"\n            ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-attr"}},"parentCommentId"),"=",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-string"}},"{commentId}"),"\n            ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-attr"}},"key"),"=",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-string"}},"{item.id}"),"\n            ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-attr"}},"level"),"=",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-string"}},"{level}"),"\n            ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-attr"}},"history"),"=",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-string"}},"{history}"),"\n          />"),"\n        );\n      } else {\n        return null;\n      }\n    });\n  } else {\n    return null;\n  }\n};\n\nclass Comment extends React.Component {\n  render() {\n    return (\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-tag"}},"<>"),"\n        {this.props.item.recomment.length > 0 ? (\n          "),"<Comments\n            items={data.qnaboardcomment}\n            postId={this.props.postId}\n            level={this.props.level + 1}\n            history={this.props.history}\n            commentId={this.props.item.id}\n          />\n        ) : null}\n      </>\n    );\n  }\n}")))}}]),a}(l.a.Component);D.isMDXComponent=!0},qNsG:function(e,a,n){"use strict";var t=n("4mXO"),s=n.n(t),o=n("pLtp"),m=n.n(o);function r(e,a){if(null==e)return{};var n,t,o=function(e,a){if(null==e)return{};var n,t,s={},o=m()(e);for(t=0;t<o.length;t++)n=o[t],a.indexOf(n)>=0||(s[n]=e[n]);return s}(e,a);if(s.a){var r=s()(e);for(t=0;t<r.length;t++)n=r[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}n.d(a,"a",function(){return r})},rd9m:function(e,a,n){"use strict";n.r(a),n.d(a,"title",function(){return g}),n.d(a,"createdAt",function(){return d}),n.d(a,"filename",function(){return u}),n.d(a,"category",function(){return h}),n.d(a,"tag",function(){return N}),n.d(a,"thumb",function(){return E}),n.d(a,"slug",function(){return T}),n.d(a,"default",function(){return D});var t=n("qNsG"),s=n("0iUn"),o=n("sLSF"),m=n("MI3g"),r=n("a7VT"),p=n("Tit0"),c=n("q1tI"),l=n.n(c),i=n("6qfE"),g="Commands for Postgres DB initial Setup",d="2019-02-25T00:00:00.000Z",u="2019-02-25-Commands-for-Postgres-DB-setup",h=["backend"],N=["postgres","db"],E="2019-02-25_thumb.jpg",T="Create DB, TABLE, USER, permission",D=function(e){function a(e){var n;return Object(s.default)(this,a),(n=Object(m.default)(this,Object(r.default)(a).call(this,e))).layout=null,n}return Object(p.default)(a,e),Object(o.default)(a,[{key:"render",value:function(){var e=this.props,a=e.components;Object(t.a)(e,["components"]);return l.a.createElement(i.MDXTag,{name:"wrapper",components:a},l.a.createElement(i.MDXTag,{name:"h1",components:a},"Commands for Postgres DB initial setup"),l.a.createElement(i.MDXTag,{name:"p",components:a},"by Moondaddi on 2019-02-25"),l.a.createElement(i.MDXTag,{name:"hr",components:a}),l.a.createElement(i.MDXTag,{name:"h2",components:a},"TL;DR;"),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Create DB"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},"postgres=# CREATE DATABASE [db_name];")),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Create User with Password"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},"postgres=# CREATE USER [myuser] WITH ENCRYPTED PASSWORD '[password]';")),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Grant the privileges"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},"postgres=# GRANT ALL PRIVILEGES ON DATABASE [db_name] TO [myuser];")),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Grant a permission to create DB to user"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},"postgres=# ALTER USER [myuser] WITH CREATEDB;")))}}]),a}(l.a.Component);D.isMDXComponent=!0},ua6i:function(e,a,n){"use strict";n.r(a),n.d(a,"title",function(){return g}),n.d(a,"createdAt",function(){return d}),n.d(a,"filename",function(){return u}),n.d(a,"category",function(){return h}),n.d(a,"tag",function(){return N}),n.d(a,"thumb",function(){return E}),n.d(a,"slug",function(){return T}),n.d(a,"default",function(){return D});var t=n("qNsG"),s=n("0iUn"),o=n("sLSF"),m=n("MI3g"),r=n("a7VT"),p=n("Tit0"),c=n("q1tI"),l=n.n(c),i=n("6qfE"),g="Making virtualenv for staring Django project on MacOS",d="2018-08-25T00:00:00.000Z",u="2018-08-25-Making-virtualenv-for-Django",h=["django"],N=["django","venv","virtualenv"],E="2018-08-25_thumb.jpg",T="Hard to remember",D=function(e){function a(e){var n;return Object(s.default)(this,a),(n=Object(m.default)(this,Object(r.default)(a).call(this,e))).layout=null,n}return Object(p.default)(a,e),Object(o.default)(a,[{key:"render",value:function(){var e=this.props,a=e.components;Object(t.a)(e,["components"]);return l.a.createElement(i.MDXTag,{name:"wrapper",components:a},l.a.createElement(i.MDXTag,{name:"h1",components:a},"Making virtualenv for staring Django project on MacOS"),l.a.createElement(i.MDXTag,{name:"p",components:a},"by moondaddi on 2018-08-25"),l.a.createElement(i.MDXTag,{name:"hr",components:a}),l.a.createElement(i.MDXTag,{name:"h3",components:a},"Commands examples to make a virtualenv and prerequisites for Django project start on MacOS"),l.a.createElement("br",null),l.a.createElement(i.MDXTag,{name:"blockquote",components:a},l.a.createElement(i.MDXTag,{name:"p",components:a,parentName:"blockquote"},"The below commands are working only for MacOS")),l.a.createElement("br",null),l.a.createElement(i.MDXTag,{name:"h2",components:a},"1. Make the project foler"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," mkdir some_project"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-built_in"}},"cd")," some_project"))),l.a.createElement("br",null),l.a.createElement(i.MDXTag,{name:"h2",components:a},"2. Set up Virtualenv"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," python -m venv env_some_project"))),l.a.createElement(i.MDXTag,{name:"blockquote",components:a},l.a.createElement(i.MDXTag,{name:"p",components:a,parentName:"blockquote"},"I'm using pyenv for version control of python")),l.a.createElement("br",null),l.a.createElement(i.MDXTag,{name:"h2",components:a},"3. Activate the virtualenv"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-built_in"}},"source")," ./env_some_project/bin/activate"))),l.a.createElement(i.MDXTag,{name:"blockquote",components:a},l.a.createElement(i.MDXTag,{name:"p",components:a,parentName:"blockquote"},"Note: prefix (env_some_project) will appear when virtual env is activated successfully")),l.a.createElement("br",null),l.a.createElement(i.MDXTag,{name:"h2",components:a},"4. Install Django"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," pip3 install django"))),l.a.createElement("br",null),l.a.createElement(i.MDXTag,{name:"h2",components:a},"5. Start project"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," django-admin startproject some_project"))),l.a.createElement("br",null),l.a.createElement(i.MDXTag,{name:"h2",components:a},"6. Start app"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," python manage.py startapp some_app"))),l.a.createElement("br",null),l.a.createElement(i.MDXTag,{name:"h2",components:a},"7. settings.py"),l.a.createElement("br",null),l.a.createElement(i.MDXTag,{name:"h3",components:a},"7-1. Add app in ","[INSTALLED_APPS]"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-python"}},"INSTALLED_APPS = [\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'django.contrib.admin'"),",\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'django.contrib.auth'"),",\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'django.contrib.contenttypes'"),",\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'django.contrib.sessions'"),",\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'django.contrib.messages'"),",\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'django.contrib.staticfiles'"),",\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'django.contrib.humanize'"),",\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'some_app'"),",\n]")),l.a.createElement("br",null),l.a.createElement(i.MDXTag,{name:"h3",components:a},"7-2. Setting DB"),l.a.createElement(i.MDXTag,{name:"blockquote",components:a},l.a.createElement(i.MDXTag,{name:"p",components:a,parentName:"blockquote"},"postgres")),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-python"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"if")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'RDS_DB_NAME'")," ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"in")," os.environ:\n    DATABASES = {\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'default'"),": {\n            ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'ENGINE'"),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'django.db.backends.postgresql_psycopg2'"),",\n            ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'NAME'"),": os.environ[",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'RDS_DB_NAME'"),"],\n            ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'USER'"),": os.environ[",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'RDS_USERNAME'"),"],\n            ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'PASSWORD'"),": os.environ[",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'RDS_PASSWORD'"),"],\n            ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'HOST'"),": os.environ[",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'RDS_HOSTNAME'"),"],\n            ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'PORT'"),": os.environ[",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'RDS_PORT'"),"],\n        }\n    }\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"else"),":\n    DATABASES = {\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'default'"),": {\n            ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'ENGINE'"),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'django.db.backends.postgresql_psycopg2'"),",\n            ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'NAME'"),": DB_NAME,\n            ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'USER'"),": DB_USER,\n            ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'PASSWORD'"),": DB_PASSWORD,\n            ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'HOST'"),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'localhost'"),",\n            ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'PORT'"),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"''"),",\n        }\n    }")))}}]),a}(l.a.Component);D.isMDXComponent=!0},uxIH:function(e,a,n){"use strict";n.r(a);var t=n("V+17");a.default=t.default},wdB0:function(e,a,n){"use strict";n.r(a),n.d(a,"title",function(){return g}),n.d(a,"createdAt",function(){return d}),n.d(a,"filename",function(){return u}),n.d(a,"category",function(){return h}),n.d(a,"tag",function(){return N}),n.d(a,"thumb",function(){return E}),n.d(a,"slug",function(){return T}),n.d(a,"default",function(){return D});var t=n("qNsG"),s=n("0iUn"),o=n("sLSF"),m=n("MI3g"),r=n("a7VT"),p=n("Tit0"),c=n("q1tI"),l=n.n(c),i=n("6qfE"),g="How to Deploy the Next.js app to AWS Lambda",d="2019-01-11T00:00:00.000Z",u="2019-01-11-Deploy-Nextjs-app-to-AWS-Lambda",h=["react"],N=["next","aws","lambda"],E="2019-01-11_thumb.png",T="with Apex up",D=function(e){function a(e){var n;return Object(s.default)(this,a),(n=Object(m.default)(this,Object(r.default)(a).call(this,e))).layout=null,n}return Object(p.default)(a,e),Object(o.default)(a,[{key:"render",value:function(){var e=this.props,a=e.components;Object(t.a)(e,["components"]);return l.a.createElement(i.MDXTag,{name:"wrapper",components:a},l.a.createElement(i.MDXTag,{name:"h1",components:a},"How to deploy the Next.js to AWS Lambda"),l.a.createElement(i.MDXTag,{name:"p",components:a},"by moondaddi on 2019-01-11"),l.a.createElement(i.MDXTag,{name:"hr",components:a}),l.a.createElement(i.MDXTag,{name:"p",components:a},"This is a tiny example to show how to deploy the Next.js app on AWS Lambda using ",l.a.createElement(i.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://up.docs.apex.sh/#introduction"}},"Apex Up"),"."),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Next.js app with custom server"),l.a.createElement(i.MDXTag,{name:"p",components:a},"The custom server for Next.js app is needed to run your app on AWS Lambda. In this example, ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"express")," will be used."),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-javascript"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-comment"}},"// server.js"),"\n\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"const")," express = ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-built_in"}},"require"),"(",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"express"'),");\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"const")," next = ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-built_in"}},"require"),"(",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"next"'),");\n\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"const")," port = ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-built_in"}},"parseInt"),"(process.env.PORT, ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-number"}},"10"),") || ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-number"}},"3000"),";\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"const")," dev = process.env.NODE_ENV !== ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"production"'),";\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"const")," app = next({ dev });\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"const")," handle = app.getRequestHandler();\n\napp\n  .prepare()\n  .then(",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-function"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-params"}},"()")," =>")," {\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"const")," server = express();\n\n    server.get(",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"/"'),", (req, res) => {\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"return")," app.render(req, res, ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"/"'),", req.params);\n    });\n\n    server.get(",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"/about"'),", (req, res) => {\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"return")," app.render(req, res, ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"/about"'),", req.params);\n    });\n\n    server.get(",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"*"'),", (req, res) => {\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"return")," handle(req, res);\n    });\n\n    server.listen(port, err => {\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"if")," (err) ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"throw")," err;\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-built_in"}},"console"),".log(",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"`> Ready on http://localhost:",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-subst"}},"${port}"),"`"),");\n    });\n  })\n  .catch(",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-function"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-params"}},"ex")," =>")," {\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-built_in"}},"console"),".log(ex);\n    process.exit(",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-number"}},"1"),");\n  });")),l.a.createElement(i.MDXTag,{name:"h2",components:a},"update ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"h2"},"package.json")," with custom ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"h2"},"server.js")),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-json"}},"{\n  ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"scripts"'),": {\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"dev"'),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"node server.js"'),",\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"build"'),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"next build"'),",\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"start"'),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"NODE_ENV=production node server.js"'),"\n  }\n}")),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Install Apex Up"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," curl -sf https://up.apex.sh/install | sh"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"\n#"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," verify the installation"),"\n",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," up version"))),l.a.createElement(i.MDXTag,{name:"h2",components:a},"AWS credentials"),l.a.createElement(i.MDXTag,{name:"p",components:a},"You need to have one AWS account and recommend to use IAM with programmaic way for security and convinience. If you have already installed ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"awscli")," or ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"awsebcli"),", etc. You are having ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"~/.aws/credentials")," which is storing AWS credentials. It allows you to use ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"AWS_PROFILE")," environment. If you don't please make one and save it with your account ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"access key")," and ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"security key")," in it."),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"#"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," ~/.aws/credentials"),"\n\n[my-aws-account-for-lambda]\naws_access_key = xxxxxxxxxxxxx\naws_secret_access_key = xxxxxxxxxxxxxxxxxxxx")),l.a.createElement(i.MDXTag,{name:"h2",components:a},"IAM policy for Up CLI"),l.a.createElement(i.MDXTag,{name:"p",components:a},"IAM policy allows the Up to access your AWS resources in order to deploy your Next.js app on Lambda. Go to ",l.a.createElement(i.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://aws.amazon.com/iam/"}},"AWS IAM")," and make the new policy and link it up to your AWS account."),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-json"}},"{\n  ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"Version"'),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"2012-10-17"'),",\n  ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"Statement"'),": [\n    {\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"Effect"'),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"Allow"'),",\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"Action"'),": [\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"acm:*"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"cloudformation:Create*"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"cloudformation:Delete*"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"cloudformation:Describe*"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"cloudformation:ExecuteChangeSet"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"cloudformation:Update*"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"cloudfront:*"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"cloudwatch:*"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"ec2:*"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"ecs:*"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"events:*"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"iam:AttachRolePolicy"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"iam:CreatePolicy"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"iam:CreateRole"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"iam:DeleteRole"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"iam:DeleteRolePolicy"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"iam:GetRole"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"iam:PassRole"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"iam:PutRolePolicy"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"lambda:AddPermission"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"lambda:Create*"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"lambda:Delete*"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"lambda:Get*"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"lambda:InvokeFunction"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"lambda:List*"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"lambda:RemovePermission"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"lambda:Update*"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"logs:Create*"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"logs:Describe*"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"logs:FilterLogEvents"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"logs:Put*"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"logs:Test*"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"route53:*"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"route53domains:*"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"s3:*"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"ssm:*"'),",\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"sns:*"'),"\n      ],\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"Resource"'),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"*"'),"\n    },\n    {\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"Effect"'),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"Allow"'),",\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"Action"'),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"apigateway:*"'),",\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"Resource"'),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"arn:aws:apigateway:*::/*"'),"\n    }\n  ]\n}")),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Create ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"h2"},"up.json")," file"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-json"}},"{\n  ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"name"'),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"nextjs-example"'),",\n  # aws account profile in ~/.aws/credentials\n  ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"profile"'),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"my-aws-account-for-lambda"'),",\n  ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"regions"'),": [",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"ap-northeast-2"'),"],\n  ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"lambda"'),": {\n    # min 128, default 512\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"memory"'),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-number"}},"256"),",\n    # AWS Lambda supports node.js 8.10 latest\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"runtime"'),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"nodejs8.10"'),"\n  },\n  ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"proxy"'),": {\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"command"'),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"npm start"'),",\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"timeout"'),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-number"}},"25"),",\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"listen_timeout"'),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-number"}},"15"),",\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"shutdown_timeout"'),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-number"}},"15"),"\n  },\n  ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"stages"'),": {\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"development"'),": {\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"proxy"'),": {\n        ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"command"'),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"yarn dev"'),"\n      }\n    }\n  },\n  ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"environment"'),": {\n    # you can hydrate env variables as you want.\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"NODE_ENV"'),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"production"'),"\n  },\n  ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"error_pages"'),": {\n    ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"variables"'),": {\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"support_email"'),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"admin@my-email.com"'),",\n      ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},'"color"'),": ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"#2986e2"'),"\n    }\n  }\n}")),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Build the Next.js app before deploy"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," yarn build"))),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Create ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"h2"},".upignore")," file"),l.a.createElement(i.MDXTag,{name:"p",components:a},"The Up will inspect your files to compose and deploy to lambda. Firstly The up will read ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},".gitignore")," and ignore files written in ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},".gitignore"),". And after that, ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},".upignore")," will be read. The Up, by default, ignores dotfiles, so needs to negate ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},".next")," directory in ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},".upignore")," in order for the Up will build the package with it."),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"#"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," .upignore"),"\n\n!.next")),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Deploy"),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-shell"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-meta"}},"$"),l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"bash"}}," up"))))}}]),a}(l.a.Component);D.isMDXComponent=!0},y4r3:function(e,a,n){"use strict";n.r(a),n.d(a,"title",function(){return g}),n.d(a,"createdAt",function(){return d}),n.d(a,"filename",function(){return u}),n.d(a,"category",function(){return h}),n.d(a,"tag",function(){return N}),n.d(a,"thumb",function(){return E}),n.d(a,"slug",function(){return T}),n.d(a,"default",function(){return D});var t=n("qNsG"),s=n("0iUn"),o=n("sLSF"),m=n("MI3g"),r=n("a7VT"),p=n("Tit0"),c=n("q1tI"),l=n.n(c),i=n("6qfE"),g="AWS Elastic Beanstalk makes redirect HTTP to HTTPS",d="2018-12-18T00:00:00.000Z",u="2018-12-18-AWS-EB-Load-Balancer-redirect-to-https",h=["backend"],N=["aws","eb","elastic","beanstalk","redirect","https"],E="2018-12-18_thumb.jpg",T="Sweet beanstalk",D=function(e){function a(e){var n;return Object(s.default)(this,a),(n=Object(m.default)(this,Object(r.default)(a).call(this,e))).layout=null,n}return Object(p.default)(a,e),Object(o.default)(a,[{key:"render",value:function(){var e=this.props,a=e.components;Object(t.a)(e,["components"]);return l.a.createElement(i.MDXTag,{name:"wrapper",components:a},l.a.createElement(i.MDXTag,{name:"h1",components:a},"AWS Elastic Beanstalk makes redirect to HTTPS"),l.a.createElement(i.MDXTag,{name:"p",components:a},"by moondaddi on 2018-12-18"),l.a.createElement(i.MDXTag,{name:"hr",components:a}),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Elastic Load balancer and Elastic Beanstalk"),l.a.createElement(i.MDXTag,{name:"p",components:a},"AWS Elastic Load balancer automatically distributes incoming application traffic across multiple AWS EC2. It enables your application's falut tolerance level higher and seamlessly providing the required amount of load balancing capacity needed to distribute application traffics."),l.a.createElement(i.MDXTag,{name:"p",components:a},"When you deploy your application whatever it's built with any language to Elastic Beanstalk, Elastic Beanstalk automatically performs all required process in deployment for your application. One of requirements is Elastic Load balancer in front of EC2 which is generated by Elastic Beanstalk."),l.a.createElement(i.MDXTag,{name:"p",components:a},"Elastic Load balancer is listening the port 80 as default. And you can set 443 port for HTTPS."),l.a.createElement(i.MDXTag,{name:"h2",components:a},"Redirect to HTTPS"),l.a.createElement(i.MDXTag,{name:"p",components:a},"Once everything sets up, You can access your application in Elastic Beanstalk through HTTP and also HTTPS."),l.a.createElement(i.MDXTag,{name:"p",components:a},"If you want all requests to port 80 to redirect to port 443, HTTPS, you can make ssl_redirect.config file in .ebextensions in your application root directory."),l.a.createElement(i.MDXTag,{name:"pre",components:a},l.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-apache"}},l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attribute"}},"files"),':\n    "/',l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attribute"}},"etc"),"/httpd/conf.d/ssl_redirect.conf",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'":\n        mode: "'),"000644",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"\n        owner: root\n        group: root\n        content: |\n            RewriteEngine On\n            <If "'),"-n '",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-variable"}},"%{HTTP:X-Forwarded-Proto}"),"' && ",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-variable"}},"%{HTTP:X-Forwarded-Proto}")," != 'https'",l.a.createElement(i.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'">\n            RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R,L]\n            </If>'))),l.a.createElement(i.MDXTag,{name:"h2",components:a},"How it works"),l.a.createElement(i.MDXTag,{name:"p",components:a},"During deployment of Elastic Beanstalk, it will check ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},".ebextendsion")," directory if any ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"*.config")," files there. If config file is found, Elastic Beanstalk will proceed it before applying the deployment of your application."),l.a.createElement(i.MDXTag,{name:"p",components:a},l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"ssl_redirect.config")," file will be generated in path ",l.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"/etc/httpd/conf.d/")," and this will works for apache server to check any none https request and redirect it to https."))}}]),a}(l.a.Component);D.isMDXComponent=!0}},[["7Fyx",1,0]]]);