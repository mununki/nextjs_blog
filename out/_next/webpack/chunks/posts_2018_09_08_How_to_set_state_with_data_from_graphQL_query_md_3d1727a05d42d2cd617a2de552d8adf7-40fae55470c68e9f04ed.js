__NEXT_REGISTER_CHUNK("posts_2018_09_08_How_to_set_state_with_data_from_graphQL_query_md_3d1727a05d42d2cd617a2de552d8adf7",function(){webpackJsonp([2],{266:function(e,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=n(1),s=n.n(t),o=n(421);n.n(o);a.default=function(e){var a=e.components;!function(e,a){if(null==e)return{};var n,t,s={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],a.indexOf(n)>=0||(s[n]=e[n]);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)n=r[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}}(e,["components"]);return s.a.createElement(o.MDXTag,{name:"wrapper",components:a},s.a.createElement(o.MDXTag,{name:"h1",components:a},"How to set state with data from apollo grapqhQL query"),s.a.createElement(o.MDXTag,{name:"p",components:a},"by Moondaddi on 2018-09-08"),s.a.createElement(o.MDXTag,{name:"hr",components:a}),s.a.createElement(o.MDXTag,{name:"h2",components:a},"Prefill the form with query data"),s.a.createElement(o.MDXTag,{name:"ul",components:a},s.a.createElement(o.MDXTag,{name:"li",components:a,parentName:"ul"},"prefill values into form or render data into DOM after query"),s.a.createElement(o.MDXTag,{name:"li",components:a,parentName:"ul"},"modify data after query")),s.a.createElement("br",null),s.a.createElement(o.MDXTag,{name:"h2",components:a},"Solution 1"),s.a.createElement(o.MDXTag,{name:"h3",components:a},"in componentDidMount()"),s.a.createElement(o.MDXTag,{name:"pre",components:a},s.a.createElement(o.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-javascript",metaString:""}},s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"import")," React ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"from")," ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"react"'),";\n",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"import")," { Query } ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"from")," ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},'"react-apollo"'),";\n\n",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-class"}},s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-keyword"}},"class")," ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-title"}},"Example")," ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-keyword"}},"extends")," ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-title"}},"React"),".",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-title"}},"Component")," "),"{\n  state = {\n    ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"some"),": ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-literal"}},"null"),"\n  };\n\n  componentDidMount() {\n    ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"this"),"._queryMe\n      .query({\n        ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"query"),": other - query,\n        ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"variables"),": { ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"some"),": thing }\n      })\n      .then(",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-function"}},s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-params"}},"response")," =>")," {\n        ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"this"),".setState({\n          ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"some"),": data.me.nickname\n        });\n      })\n      .catch(",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-function"}},s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-params"}},"error")," =>")," ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-built_in"}},"console"),".log(error));\n  }\n\n  render() {\n    ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"return")," (\n      ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"xml"}},s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-tag"}},"<",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-name"}},"Query")," ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-attr"}},"query"),"=",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-string"}},"{some")," ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-attr"}},"-")," ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-attr"}},"query"),"}>"),"\n        {({ client }) => {\n          this._queryMe = client;\n\n          return null;\n        }}\n      ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-tag"}},"</",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-name"}},"Query"),">")),"\n    );\n  }\n}")),s.a.createElement(o.MDXTag,{name:"h3",components:a},"props function : onCompleted"),s.a.createElement(o.MDXTag,{name:"pre",components:a},s.a.createElement(o.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-javascript",metaString:""}},s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"import")," React ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"from")," ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'react'"),"\n",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"import")," { Query } ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"from")," ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-string"}},"'react-apollo'"),"\n\n",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-class"}},s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-keyword"}},"class")," ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-title"}},"Example")," ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-keyword"}},"extends")," ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-title"}},"React"),".",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-title"}},"Component")," "),"{\n  state = {\n    ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"some"),": ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-literal"}},"null"),"\n  }\n\n  _queryMe = ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-function"}},s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-params"}},"data")," =>")," {\n    ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"this"),".setState({\n      ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"some"),": data\n    })\n  }\n\n  render() {\n    ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"return")," (\n      ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"xml"}},s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-tag"}},"<",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-name"}},"Query"),"\n        ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-attr"}},"query"),"=",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-string"}},"{some-query}"),"\n        ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-attr"}},"onCompleted"),"=",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-string"}},"{data")," =>")," this._queryMe(data)}\n      >\n        {() => {\n          return null;\n        }}\n      ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-tag"}},"</",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-name"}},"Query"),">")),"\n    )\n  }\n}")),s.a.createElement("br",null),s.a.createElement(o.MDXTag,{name:"h2",components:a},"Solution 2 (The BEST ðŸ‘)"),s.a.createElement(o.MDXTag,{name:"p",components:a},"Using HOC withApollo"),s.a.createElement(o.MDXTag,{name:"pre",components:a},s.a.createElement(o.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"hljs language-javascript",metaString:""}},s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-class"}},s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-keyword"}},"class")," ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-title"}},"Example")," ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-keyword"}},"extends")," ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-title"}},"React"),".",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-title"}},"Component")," "),"{\n  state = {\n    ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"some"),": ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-literal"}},"null"),"\n  };\n\n  componentDidMount() {\n    ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"this"),".props.client\n      .query({\n        ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"query"),": some_query,\n        ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"variables"),": {\n          ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"id"),": ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-number"}},"1"),"\n        }\n      })\n      .then(",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-function"}},s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-params"}},"res")," =>"),"\n        ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"this"),".setState({\n          ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-attr"}},"some"),": res\n        })\n      );\n  }\n\n  render() {\n    ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"return")," ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"xml"}},s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-tag"}},"<",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-name"}},"div"),">"),"...",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-tag"}},"</",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"span",props:{className:"hljs-name"}},"div"),">")),";\n  }\n}\n\n",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-comment"}},"// using HOC"),"\n",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"export")," ",s.a.createElement(o.MDXTag,{name:"span",components:a,parentName:"code",props:{className:"hljs-keyword"}},"default")," withApollo(Example);")))}},420:function(e,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.withMDXComponents=void 0;var t=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},s=p(n(1)),o=p(n(423)),r=p(n(157));function p(e){return e&&e.__esModule?e:{default:e}}var m=(0,o.default)({}),c=m.Provider,l=m.Consumer;a.withMDXComponents=function(e){return function(a){var n=a.components,o=function(e,a){var n={};for(var t in e)a.indexOf(t)>=0||Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n}(a,["components"]);return s.default.createElement(l,null,function(a){return s.default.createElement(e,t({components:n||a},o))})}};var i=function(e){var a=e.components,n=e.children;return s.default.createElement(c,{value:a},n)};i.propTypes={components:r.default.object.isRequired,children:r.default.element.isRequired},a.default=i},421:function(e,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=n(422);Object.defineProperty(a,"MDXTag",{enumerable:!0,get:function(){return o(t).default}});var s=n(420);function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"MDXProvider",{enumerable:!0,get:function(){return o(s).default}})},422:function(e,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},s=function(){function e(e,a){for(var n=0;n<a.length;n++){var t=a[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(a,n,t){return n&&e(a.prototype,n),t&&e(a,t),a}}(),o=n(1),r=c(o),p=c(n(263)),m=n(420);function c(e){return e&&e.__esModule?e:{default:e}}var l={inlineCode:"code",wrapper:"div"},i=function(e){function a(){return function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,a){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?e:a}(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(e,a):e.__proto__=a)}(a,o.Component),s(a,[{key:"render",value:function(){var e=this.props,a=e.name,n=e.parentName,s=e.props,o=void 0===s?{}:s,m=e.children,c=e.components,i=void 0===c?{}:c,u=e.Layout,d=e.layoutProps,N=i[n+"."+a]||i[a]||l[a]||a;return u?((0,p.default)(this,u),r.default.createElement(u,t({components:i},d),r.default.createElement(N,o,m))):r.default.createElement(N,o,m)}}]),a}();a.default=(0,m.withMDXComponents)(i)},423:function(e,a,n){"use strict";a.__esModule=!0;var t=o(n(1)),s=o(n(424));function o(e){return e&&e.__esModule?e:{default:e}}a.default=t.default.createContext||s.default,e.exports=a.default},424:function(e,a,n){"use strict";a.__esModule=!0;var t=n(1),s=(r(t),r(n(157))),o=r(n(425));r(n(426));function r(e){return e&&e.__esModule?e:{default:e}}function p(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function m(e,a){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?e:a}function c(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(e,a):e.__proto__=a)}var l=1073741823;a.default=function(e,a){var n,r,i="__create-react-context-"+(0,o.default)()+"__",u=function(e){function n(){var a,t,s,o;p(this,n);for(var r=arguments.length,c=Array(r),l=0;l<r;l++)c[l]=arguments[l];return a=t=m(this,e.call.apply(e,[this].concat(c))),t.emitter=(s=t.props.value,o=[],{on:function(e){o.push(e)},off:function(e){o=o.filter(function(a){return a!==e})},get:function(){return s},set:function(e,a){s=e,o.forEach(function(e){return e(s,a)})}}),m(t,a)}return c(n,e),n.prototype.getChildContext=function(){var e;return(e={})[i]=this.emitter,e},n.prototype.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n=this.props.value,t=e.value,s=void 0;((o=n)===(r=t)?0!==o||1/o==1/r:o!=o&&r!=r)?s=0:(s="function"==typeof a?a(n,t):l,0!=(s|=0)&&this.emitter.set(e.value,s))}var o,r},n.prototype.render=function(){return this.props.children},n}(t.Component);u.childContextTypes=((n={})[i]=s.default.object.isRequired,n);var d=function(a){function n(){var e,t;p(this,n);for(var s=arguments.length,o=Array(s),r=0;r<s;r++)o[r]=arguments[r];return e=t=m(this,a.call.apply(a,[this].concat(o))),t.state={value:t.getValue()},t.onUpdate=function(e,a){0!=((0|t.observedBits)&a)&&t.setState({value:t.getValue()})},m(t,e)}return c(n,a),n.prototype.componentWillReceiveProps=function(e){var a=e.observedBits;this.observedBits=void 0===a||null===a?l:a},n.prototype.componentDidMount=function(){this.context[i]&&this.context[i].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?l:e},n.prototype.componentWillUnmount=function(){this.context[i]&&this.context[i].off(this.onUpdate)},n.prototype.getValue=function(){return this.context[i]?this.context[i].get():e},n.prototype.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(t.Component);return d.contextTypes=((r={})[i]=s.default.object,r),{Provider:u,Consumer:d}},e.exports=a.default},425:function(e,a,n){"use strict";(function(a){var n="__global_unique_id__";e.exports=function(){return a[n]=(a[n]||0)+1}}).call(a,n(261))},426:function(e,a,n){"use strict";var t=n(262);e.exports=t}})});